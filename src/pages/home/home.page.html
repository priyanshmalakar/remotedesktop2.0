<ion-header>
  <div class="bg-blue-100">
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-menu-button class="text-blue-900"></ion-menu-button>
      </ion-buttons>

      <ion-title class="!text-blue-900 !font-bold">
  <div class="flex items-center gap-3">
    <img
      src="/assets/Gemini_Generated_Image_l3.png"
      alt="RemoteControl Logo"
      class="h-8 w-8 object-contain" />

    <span class="text-lg md:text-xl font-bold leading-none">
      ProtoMart Easy Access
    </span>
  </div>
</ion-title>


      <ion-buttons slot="end" class="mr-3">
        <ion-spinner
          *ngIf="connectService.fileLoading"
          color="primary"
          class="w-5 h-5">
        </ion-spinner>

        <ion-button
          (click)="screenSelect(false, true)"
          fill="clear"
          class="!text-blue-900">
          <ion-icon name="browsers-outline" class="text-lg"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </div>
</ion-header>

<ion-content>
  <div class="max-w-5xl mx-auto py-6 px-4 bg-slate-100">

    <!-- Top Action Buttons -->
    <div class="flex justify-end gap-3 mb-6">
      <button 
        *ngIf="electronService.isElectron" 
        (click)="electronService.restart()"
        class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-yellow-600 transition text-sm font-medium">
        Click before connect
      </button>

      <button
        *ngIf="connectService.connected"
        (click)="disconnect()"
        class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition text-sm font-medium">
        Disconnect
      </button>
    </div>

    <!-- Main Cards Container -->
    <div class="grid gap-5 grid-cols-1 md:grid-cols-2 mb-6">

      <!-- My Computer Card -->
      <div
        *ngIf="electronService.isElectron"
        class="bg-white rounded-lg border border-gray-300 overflow-hidden">

        <div class="bg-blue-50 px-5 py-3 border-b border-gray-300">
          <div class="text-xs text-gray-600 uppercase tracking-wide mb-1">Your Workspace</div>
          <h3 class="text-blue-900 text-lg font-bold">My Computer</h3>
        </div>

        <div class="px-5 py-5">
          <div class="text-sm text-gray-600 mb-3 text-center">Share this ID</div>
          
          <div class="flex justify-center items-center gap-0.5 mb-4">
            <span
              *ngFor="let number of connectService.idArray; let i = index"
              class="w-9 h-9 bg-blue-600 text-white rounded 
                     flex items-center justify-center text-base
                     font-semibold"
              [class.mr-1.5]="i === 2 || i === 5">
              {{ number }}
            </span>
          </div>

          <div class="flex justify-center">
            <button
              (click)="copyMyId()"
              class="px-4 py-2 bg-blue-100 text-blue-700 font-medium
                     rounded hover:bg-blue-200 transition text-sm">
              Copy ID
            </button>
          </div>

          <p class="text-center text-gray-500 text-xs mt-3">
            Share with trusted users only
          </p>
        </div>
      </div>

      <!-- Remote Computer Card -->
      <div class="bg-white rounded-lg border border-gray-300 overflow-hidden">

        <div class="bg-blue-50 px-5 py-3 border-b border-gray-300">
          <div class="text-xs text-gray-600 uppercase tracking-wide mb-1">Remote Access</div>
          <h3 class="text-blue-900 text-lg font-bold">Remote Computer</h3>
        </div>

        <div class="px-5 py-5">
          <div class="text-sm text-gray-600 mb-3 text-center">Enter Partner ID</div>

          <div class="flex justify-center items-center gap-0.5 mb-4">
            <input
              #digitInput
              *ngFor="let number of connectService.remoteIdArray; let i = index"
              [(ngModel)]="number.number"
              maxlength="1"
              (keydown)="onDigitInput($event, i)"
              (keydown.enter)="connect()"
              class="digit-input w-9 h-9
                     bg-white
                     border border-gray-400
                     rounded
                     text-center text-base
                     font-semibold
                     text-blue-900
                     focus:outline-none
                     focus:border-blue-500
                     focus:ring-1 focus:ring-blue-500
                     transition"
              [class.mr-1.5]="i === 2 || i === 5"
            />
          </div>

          <button
            (click)="connect()"
            class="w-full bg-blue-600 hover:bg-blue-700
                   text-white font-semibold py-2.5 rounded
                   transition text-sm">
            Connect
          </button>
        </div>
      </div>
    </div>

    <!-- Banner Section -->
<div *ngIf="banner2"
     class="bg-white rounded-lg border border-gray-300 overflow-hidden
            cursor-pointer hover:border-blue-400 transition"
     (click)="openBannerLink(banner2)">

  <!-- Sponsored Label -->
  <div class="px-3 py-1 text-xs font-semibold text-gray-500 bg-gray-100">
    Sponsored Ad
  </div>

  <!-- VIDEO -->
  <video *ngIf="banner2.videoUrl"
         [src]="banner2.videoUrl"
         autoplay
         muted
         loop
         playsinline
         class="w-full max-h-[260px] object-contain mx-auto block pointer-events-none">
  </video>

  <!-- IMAGE -->
  <img *ngIf="banner2.image && !banner2.videoUrl"
       [src]="banner2.image"
       alt="Sponsored Ad"
       class="w-full max-h-[260px] object-contain mx-auto block pointer-events-none">
</div>


    <!-- Status Bar -->
    <div class="mt-6 bg-gray-800 rounded-lg px-5 py-3">
      <div class="flex justify-between items-center">
        <div class="flex items-center gap-2">
          <div
            class="w-2.5 h-2.5 rounded-full"
            [class.bg-green-500]="connectService.connected"
            [class.bg-yellow-500]="connectService.initialized && !connectService.connected"
            [class.bg-gray-500]="!connectService.initialized">
          </div>
          <span class="text-white text-sm">
            {{ connectService.connected
              ? 'Connected'
              : (connectService.initialized ? 'Waiting for connection' : 'Ready') }}
          </span>
        </div>
        <span class="text-gray-400 text-xs">Secure P2P</span>
      </div>
    </div>

  </div>
</ion-content>